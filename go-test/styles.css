/* 8â€‘Bit Reaction Trainer - Styles */
:root {
	--bg: #0b0f0c;
	--panel: #0f1a14;
	--panel-border: #1f3329;
	--text: #d0ffd6;
	--muted: #98c9a4;
	--accent: #35ff69;
	--accent-weak: #154e2d;
	--accent-strong: #7aff9a;
	--shadow: #062012;
}

/* Themes */
body.theme-green {
	--bg: #0b0f0c;
	--panel: #0f1a14;
	--panel-border: #1f3329;
	--text: #d0ffd6;
	--muted: #98c9a4;
	--accent: #35ff69;
	--accent-weak: #154e2d;
	--accent-strong: #7aff9a;
	--shadow: #062012;
}

body.theme-red {
	--bg: #141111;
	--panel: #1a1414;
	--panel-border: #3a2424;
	--text: #ffe3e3;
	--muted: #d6a9a9;
	--accent: #ff4141;
	--accent-weak: #4d1d1d;
	--accent-strong: #ff8f8f;
	--shadow: #250b0b;
}

body.theme-neon {
	--bg: #07080c;
	--panel: #0a0b12;
	--panel-border: #1b1e30;
	--text: #e7e9ff;
	--muted: #b2b8ff;
	--accent: #00eaff; /* cyan neon */
	--accent-weak: #073b44;
	--accent-strong: #66f2ff;
	--shadow: #031e24;
}

/* === Pixel UI & Themes (BitReaction-like) === */
body.theme-classic {
	--primary-color: #FF6B6B;
	--secondary-color: #4ECDC4;
	--accent-color: #FFE66D;
	--bg-color: #1A1A2E;
	--text-color: #FFFFFF;
}
body.theme-neon {
	--primary-color: #FF00FF;
	--secondary-color: #00FFFF;
	--accent-color: #FFFF00;
	--bg-color: #0A0A0A;
	--text-color: #00FF00;
}
body.theme-retro {
	--primary-color: #E84545;
	--secondary-color: #2B2E4A;
	--accent-color: #F4A261;
	--bg-color: #53354A;
	--text-color: #E9D8A6;
}
body.theme-gameboy {
	--primary-color: #9BBC0F;
	--secondary-color: #8BAC0F;
	--accent-color: #306230;
	--bg-color: #0F380F;
	--text-color: #9BBC0F;
}

.pixel-font {
	font-family: "Courier New", Courier, monospace;
	font-weight: 700;
	letter-spacing: 2px;
	text-rendering: optimizeSpeed;
	image-rendering: pixelated;
}
.pixel-button {
	font-family: "Courier New", Courier, monospace;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 2px;
	border: 4px solid currentColor;
	box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
	transition: transform 100ms ease, box-shadow 100ms ease, filter 120ms ease;
	cursor: pointer;
	image-rendering: pixelated;
}
.pixel-button:hover { transform: translate(2px, 2px); box-shadow: 2px 2px 0 rgba(0,0,0,0.3); }
.pixel-button:active { transform: translate(4px, 4px); box-shadow: none; }
.pixel-block { border: 3px solid currentColor; box-shadow: inset -3px -3px 0 rgba(0,0,0,0.3); image-rendering: pixelated; }

@keyframes pixelPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.05)} }
@keyframes pixelBlink { 0%,50%,100%{opacity:1} 25%,75%{opacity:0} }
@keyframes pixelSlideDown { from{transform:translateY(-100%);opacity:0} to{transform:translateY(0);opacity:1} }
.animate-pixel-pulse { animation: pixelPulse .5s ease-in-out; }
.animate-pixel-blink { animation: pixelBlink 1s infinite; }
.animate-pixel-slide-down { animation: pixelSlideDown .3s ease-out; }

.scanlines { position: relative; overflow: hidden; }
.scanlines::before { content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,255,255,0) 50%, rgba(0,0,0,0.05) 50%); background-size:100% 4px; pointer-events:none; z-index:1; }

/* Base */
* { box-sizing: border-box; }
html, body {
	height: 100%;
	background: var(--bg);
	color: var(--text);
	font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Hiragino Sans GB, "Microsoft YaHei", "Helvetica Neue", Arial, "Noto Sans CJK SC", sans-serif;
}
body { margin: 0; }

.app-header {
	padding: 24px 16px 8px;
	text-align: center;
	position: relative;
}
.title {
	display: inline-block;
	font-size: 28px;
	letter-spacing: 1px;
	text-shadow: 0 0 0px var(--accent), 0 0 12px color-mix(in oklab, var(--accent) 30%, transparent);
	/* Pixel-ish contour */
	box-shadow:
		0 1px 0 var(--shadow),
		0 2px 0 var(--shadow);
}

.container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 12px 16px 32px;
	display: grid;
	grid-template-columns: 1fr minmax(280px, 320px);
	gap: 16px;
}

/* Panels */
.panel {
	background: var(--panel);
	padding: 16px;
	border: 2px solid var(--panel-border);
	box-shadow:
		0 0 0 2px var(--panel) inset,
		0 0 0 4px var(--panel-border) inset,
		0 6px 0 0 var(--shadow);
	border-radius: 6px;
}
.panel-title {
	margin: 0 0 12px;
	font-size: 16px;
	color: var(--muted);
}
.form-row {
	display: grid;
	grid-template-columns: 1fr 1fr;
	align-items: center;
	gap: 8px;
	margin-bottom: 12px;
}
.form-row label {
	font-size: 14px;
	color: var(--muted);
}
input[type="number"], select {
	width: 100%;
	padding: 8px 10px;
	background: #0a0f0c;
	color: var(--text);
	border: 2px solid var(--panel-border);
	border-radius: 4px;
	outline: none;
	box-shadow:
		0 0 0 2px #000 inset,
		0 0 0 4px var(--panel-border) inset;
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type="number"] { -moz-appearance: textfield; appearance: textfield; }

.actions { margin-top: 8px; }
.btn {
	display: inline-block;
	padding: 10px 14px;
	font-weight: 700;
	border: 0;
	color: #04150a;
	background: var(--accent);
	border-radius: 4px;
	cursor: pointer;
	box-shadow:
		0 0 0 2px #062012 inset,
		0 0 0 4px #0e2b1c inset,
		0 6px 0 0 var(--shadow);
	transition: transform 120ms ease, filter 120ms ease;
}
.btn:hover { filter: brightness(1.08); }
.btn:active { transform: translateY(2px); box-shadow:
	0 0 0 2px #062012 inset,
	0 0 0 4px #0e2b1c inset,
	0 4px 0 0 var(--shadow);
}

.note {
	margin-top: 12px;
	font-size: 12px;
	color: var(--muted);
	line-height: 1.4;
}

/* Header settings button */
.icon-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 36px;
	height: 36px;
	border: 0;
	border-radius: 6px;
	background: linear-gradient(180deg, #18261f, #0d1b14);
	color: var(--text);
	cursor: pointer;
	box-shadow:
		0 0 0 2px #07140e inset,
		0 0 0 4px #143226 inset,
		0 6px 0 0 var(--shadow);
	transition: filter 120ms ease, transform 120ms ease;
}
.icon-btn:hover { filter: brightness(1.08); }
.icon-btn:active { transform: translateY(2px); box-shadow:
	0 0 0 2px #07140e inset,
	0 0 0 4px #143226 inset,
	0 4px 0 0 var(--shadow);
}
.settings-btn {
	position: absolute;
	right: 16px;
	top: 16px;
}

/* Leaderboard */
.leaderboard .board-list {
	margin: 0;
	padding-left: 18px;
}
.leaderboard .placeholder {
	color: var(--muted);
}

/* Game Area */
.game-area {
	grid-column: 1 / -1;
	margin-top: 4px;
	position: relative;
	height: clamp(360px, 56vh, 560px);
	border: 2px solid var(--panel-border);
	background:
		repeating-linear-gradient(0deg, rgba(255,255,255,0.03), rgba(255,255,255,0.03) 2px, transparent 2px, transparent 16px),
		repeating-linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.03) 2px, transparent 2px, transparent 16px),
		linear-gradient(var(--panel), var(--panel));
	box-shadow:
		0 0 0 2px var(--panel) inset,
		0 0 0 4px var(--panel-border) inset,
		0 10px 0 0 var(--shadow);
	border-radius: 6px;
	overflow: hidden;
}
.hidden { display: none !important; }

/* Test overlay */
.test-overlay {
	position: absolute;
	inset: 0;
	display: grid;
	place-items: center;
	pointer-events: none;
}
.test-overlay .countdown {
	font-size: 56px;
	font-weight: 900;
	letter-spacing: 2px;
	padding: 8px 16px;
	color: #04150a;
	background: var(--accent);
	border-radius: 6px;
	box-shadow:
		0 0 0 2px #062012 inset,
		0 0 0 4px #0e2b1c inset;
	animation: pop 300ms ease-out both;
}
.test-overlay .tip {
	margin-top: 8px;
	color: var(--muted);
	font-size: 14px;
}

/* HUD */
.hud {
	position: absolute;
	top: 8px;
	left: 8px;
	right: 8px;
	display: grid;
	grid-template-columns: 1fr auto auto;
	gap: 8px 12px;
	align-items: center;
	pointer-events: none;
}
.hud .controls,
.hud button,
.hud input,
.hud label { pointer-events: auto; }
.timer {
	justify-self: start;
	font-weight: 800;
	letter-spacing: 1px;
	padding: 6px 10px;
	color: #062012;
	background: var(--accent);
	border-radius: 4px;
	box-shadow:
		0 0 0 2px #062012 inset,
		0 0 0 4px #0e2b1c inset;
}
.stats {
	justify-self: center;
	color: var(--muted);
	font-size: 13px;
}
.controls {
	justify-self: end;
	display: flex;
	align-items: center;
	gap: 8px;
}
.switch {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	color: var(--muted);
	font-size: 13px;
}
.switch input { accent-color: var(--accent); }

/* Buttons variants */
.btn-secondary {
	color: var(--text);
	background: linear-gradient(180deg, #1a2a22, #102019);
	box-shadow:
		0 0 0 2px #07140e inset,
		0 0 0 4px #143226 inset,
		0 6px 0 0 var(--shadow);
}
.btn-danger {
	color: #2b0c0c;
	background: #ff5757;
	box-shadow:
		0 0 0 2px #3b0f0f inset,
		0 0 0 4px #6e1f1f inset,
		0 6px 0 0 #2a0a0a;
}

/* Modal */
.modal-backdrop {
	position: fixed;
	inset: 0;
	background: rgba(0,0,0,0.6);
	backdrop-filter: blur(1px);
	z-index: 50;
}
.modal {
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	min-width: min(560px, 92vw);
	max-width: 92vw;
	background: var(--panel);
	border: 2px solid var(--panel-border);
	box-shadow:
		0 0 0 2px var(--panel) inset,
		0 0 0 4px var(--panel-border) inset,
		0 14px 0 0 var(--shadow);
	border-radius: 6px;
	padding: 16px;
	z-index: 60;
	animation: modalIn 220ms ease-out both;
}
.modal h3 {
	margin: 0 0 8px;
	color: var(--text);
	font-size: 18px;
}
.result-body {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 8px 12px;
	color: var(--muted);
	margin-bottom: 12px;
}
.result-actions .save-row {
	display: flex;
	gap: 8px;
	align-items: center;
	margin-bottom: 10px;
}
.result-actions .buttons {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
}
@keyframes modalIn {
	from { transform: translate(-50%, calc(-50% - 12px)); opacity: 0; }
	to { transform: translate(-50%, -50%); opacity: 1; }
}

/* Target blocks */
.target {
	position: absolute;
	width: 48px;
	height: 48px;
	background: var(--accent-weak);
	/* pixel border via layered shadows */
	box-shadow:
		0 0 0 2px #000 inset,
		0 0 0 4px var(--accent-weak) inset,
		0 0 0 6px #000 inset,
		0 4px 0 0 rgba(0,0,0,0.6);
	border-radius: 2px;
	animation: pop 240ms cubic-bezier(.2, 1.6, .2, 1) both;
	transition: filter 120ms ease;
}
.target:hover { filter: brightness(1.08) saturate(1.1); }
.target.hit {
	background: var(--accent);
	box-shadow:
		0 0 0 2px #04150a inset,
		0 0 0 4px var(--accent) inset,
		0 0 0 6px #04150a inset,
		0 6px 0 0 rgba(0,0,0,0.75);
	animation: hit 200ms ease both;
}
.target.expired {
	background: var(--accent-weak);
	box-shadow:
		0 0 0 2px #000 inset,
		0 0 0 4px var(--accent-weak) inset,
		0 0 0 6px #000 inset,
		0 6px 0 0 rgba(0,0,0,0.6);
	animation: expire 200ms ease both;
}

/* Animations */
@keyframes slideDown {
	from { transform: translateY(-24px); opacity: 0; }
	to { transform: translateY(0); opacity: 1; }
}
.slideDown { animation: slideDown 520ms ease-out both; }

@keyframes fadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}
.fadeIn { animation: fadeIn 600ms ease-out both; }

@keyframes blink {
	0%, 100% { filter: brightness(1); }
	50% { filter: brightness(1.25); }
}
.blink { animation: blink 1.4s steps(2, end) infinite; }

@keyframes pop {
	0% { transform: scale(0.6); filter: saturate(0.6) brightness(0.9); }
	60% { transform: scale(1.06); }
	100% { transform: scale(1); }
}
@keyframes hit {
	0% { transform: scale(1); }
	60% { transform: scale(0.9); }
	100% { transform: scale(0.6); opacity: 0.6; }
}
@keyframes expire {
	0% { transform: scale(1); opacity: 1; }
	100% { transform: scale(0.6); opacity: 0.6; }
}

/* Responsive */
@media (max-width: 920px) {
	.container {
		grid-template-columns: 1fr;
	}
	.game-area {
		height: clamp(320px, 48vh, 520px);
	}
}

@media (max-width: 480px) {
	/* Larger targets for mobile */
	.target {
		width: 56px;
		height: 56px;
	}
	.hud {
		grid-template-columns: 1fr;
		row-gap: 6px;
	}
	.timer {
		justify-self: start;
	}
	.stats {
		justify-self: start;
		font-size: 14px;
	}
	.controls .btn {
		padding: 10px 12px;
	}
	.modal {
		min-width: auto;
		max-width: 94vw;
	}
}

/* HUD top bar override to match BitReaction */
.hud { top: 0; left: 0; right: 0; padding: 10px 12px; background: rgba(0,0,0,0.3); }
.timer { color: var(--bg-color); background: var(--accent-color, var(--accent)); box-shadow: 0 0 0 2px rgba(0,0,0,0.4) inset, 0 0 0 4px rgba(0,0,0,0.5) inset; }
.stats { color: var(--text-color); }
.switch { color: var(--text-color); }

/* Make targets use pixel-block look optionally by adding both classes */
.target.pixel-block { background: var(--primary-color, var(--accent-weak)); border-radius: 0; }


/* === Home Hero minimal layout === */
.pixel-button { border-radius: 0; }
.hero { display: grid; place-items: center; padding: 24px 12px; }
.hero-title { text-align: center; margin: 8px 0 16px; }
.hero-h1 { font-size: clamp(48px, 8vw, 112px); color: var(--primary-color); text-shadow: 4px 4px 0 rgba(0,0,0,0.3); margin: 0 0 8px; }
.hero-h2 { font-size: clamp(36px, 6vw, 72px); color: var(--secondary-color); text-shadow: 3px 3px 0 rgba(0,0,0,0.3); margin: 0; }
.hero-dots { display: flex; gap: 8px; justify-content: center; margin: 12px 0 8px; }
.hero-dots span { width: 10px; height: 10px; background: var(--accent-color); box-shadow: 2px 2px 0 rgba(0,0,0,0.35); }
.hero-actions { display: grid; gap: 16px; justify-items: center; margin-top: 8px; }
.hero-btn { width: min(560px, 88vw); height: 80px; font-size: 24px; letter-spacing: 2px; color: var(--bg-color); background: var(--primary-color); border-color: var(--primary-color); }
.hero-btn:nth-child(2) { background: var(--secondary-color); border-color: var(--secondary-color); }
.hero-btn:nth-child(3) { background: var(--accent-color); border-color: var(--accent-color); }
/* subtle horizontal texture */
.hero-btn { background-image: repeating-linear-gradient(0deg, rgba(255,255,255,0.08) 0, rgba(255,255,255,0.08) 2px, transparent 2px, transparent 6px); }

@media (max-width: 480px) {
	.hero-btn { height: 68px; font-size: 20px; width: 92vw; }
}

/* Leaderboard full-width page */
#leaderboard-page { grid-column: 1 / -1; }

/* Center the home hero and remove panel chrome */
#ui-panel { grid-column: 1 / -1; background: transparent; border: 0; box-shadow: none; border-radius: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center; }

